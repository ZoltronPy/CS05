{% extends 'base.html' %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="{% static 'homepage.css' %}">

<!-- Carousel for Promoted Trips -->
<div id="promotedTripsCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
    <div class="carousel-inner">
        {% for trip in promoted_trips %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <img src="{{ trip.image.url }}" class="d-block w-100" style="height: 300px; object-fit: cover;" alt="{{ trip.tour_name }}">
                <div class="carousel-caption d-none d-md-block">
                    <h5>{{ trip.tour_name }}</h5>
                    <p>From {{ trip.departure_city.name }} to {{ trip.destination_city.name }}</p>
                </div>
            </div>
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#promotedTripsCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#promotedTripsCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<!-- Four Static Boxes -->
<section class="container mt-5">
    <div class="row text-center">
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 1</div>
        </div>
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 2</div>
        </div>
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 3</div>
        </div>
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 4</div>
        </div>
    </div>
</section>

<!-- Discover Services Section -->
<section class="container mt-5 text-center">
    <div class="p-3 bg-secondary text-white">
        <h3>Discover Our Premium Services</h3>
        <p>Explore exclusive deals and unparalleled comfort for your travels.</p>
    </div>
</section>

<!-- Section: Top-Selling Trips -->
<section class="container mt-5">
    <h2>Top-Selling Trips</h2>
    <div class="row">
        {% for trip in top_selling_trips %}
            <div class="col-md-4">
                <div class="card mb-3" style="height: 400px;">
                    <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">{{ trip.tour_name }}</h5>
                        <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                        <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                        <div class="text-center mt-auto">
                            <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</section>

<!-- Discover Services Section -->
<section class="container mt-5 text-center">
    <div class="p-3 bg-secondary text-white">
        <h3>Plan Your Last Minute Escape</h3>
        <p>Book your dream vacation today at incredible prices.</p>
    </div>
</section>

<!-- Section: Last Minute Trips -->
<section class="container mt-5">
    <h2>Last Minute Trips</h2>
    <div class="row">
        {% for trip in last_minute_trips %}
            <div class="col-md-4">
                <div class="card mb-3" style="height: 400px;">
                    <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">{{ trip.tour_name }}</h5>
                        <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                        <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                        <div class="text-center mt-auto">
                            <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</section>

<!-- Discover Services Section -->
<section class="container mt-5 text-center">
    <div class="p-3 bg-secondary text-white">
        <h3>Upcoming Adventures Await</h3>
        <p>Find trips with plenty of time to prepare and plan.</p>
    </div>
</section>

<!-- Section: Trips with Low Seats -->
<section class="container mt-5">
    <h2>Trips with Less Than 40 Seats</h2>
    <div class="row">
        {% for trip in trips_with_low_seats %}
            <div class="col-md-4">
                <div class="card mb-3" style="height: 400px;">
                    <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">{{ trip.tour_name }}</h5>
                        <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                        <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                        <div class="text-center mt-auto">
                            <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</section>

<!-- Section: Upcoming Trips -->
<section class="container mt-5">
    <h2>Upcoming Trips (Departing in More Than 5 Days)</h2>
    <div class="row">
        {% for trip in upcoming_trips %}
            <div class="col-md-4">
                <div class="card mb-3" style="height: 400px;">
                    <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title">{{ trip.tour_name }}</h5>
                        <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                        <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                        <div class="text-center mt-auto">
                            <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</section>

<!-- Newsletter Section -->
<section class="container mt-5">
    <div class="row text-center">
        <div class="col-md-4">
            <div class="p-3 border bg-light" style="height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h4><a href="{% url 'contact' %}">Subscribe to Our Newsletter</a></h4>
                <form method="post" action="/newsletter/">
                    {% csrf_token %}
                    <label>
                        <input type="email" name="email" placeholder="Enter your email" class="form-control">
                    </label>
                    <button type="submit" class="btn btn-primary mt-2">Subscribe</button>
                </form>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 border bg-light" style="height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h4><a href="{% url 'contact' %}">Contact Us</a></h4>
                <p>Email: info@travelagency.com</p>
                <p>Phone: +420 123 456 789</p>
                <p>Address: 123 Travel Street, Prague</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 border bg-light" style="height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h4>Follow Us</h4>
                <p>
                    <a href="#" class="me-3">Facebook</a>
                    <a href="#" class="me-3">Twitter</a>
                    <a href="#">Instagram</a>
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Footer Section -->
<footer class="container mt-5">
    <div class="row text-center">
        <div class="col-md-4">
            <div class="p-3 border bg-light">
                <h5>Follow Us</h5>
                <p>
                    <a href="#" class="me-3">Facebook</a>
                    <a href="#" class="me-3">Twitter</a>
                    <a href="#">Instagram</a>
                </p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 border bg-light">
                <h5>Our Policies</h5>
                <p>
                    <a href="#">Terms of Service</a><br>
                    <a href="#">Privacy Policy</a>
                </p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 border bg-light">
                <h5>Visit Us</h5>
                <p>123 Travel Street<br>Prague, Czech Republic</p>
            </div>
        </div>
    </div>
</footer>

{% endblock %}