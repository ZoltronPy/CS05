{% extends 'base.html' %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="{% static 'homepage.css' %}">

<!-- Promoted Trips Horizontal Scroll Slider -->
<section class="promoted-trips mb-5">
    <h2 class="text-center mb-4">Promoted Trips</h2>
    <button class="scroll-btn scroll-left" aria-label="Scroll Left">&lt;</button>
    <div class="scroll-container">
        {% for trip in promoted_trips %}
        <div class="trip-card">
            <img src="{{ trip.image.url }}" alt="{{ trip.tour_name }}" class="trip-image">
            <div class="trip-info">
                <h3 class="trip-title">{{ trip.tour_name }}</h3>
                <p>From <strong>{{ trip.departure_city.name }}</strong> to <strong>{{ trip.destination_city.name }}</strong></p>
                <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
            </div>
        </div>
        {% endfor %}
    </div>
    <button class="scroll-btn scroll-right" aria-label="Scroll Right">&gt;</button>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const scrollContainer = document.querySelector('.scroll-container');
        const scrollLeft = document.querySelector('.scroll-left');
        const scrollRight = document.querySelector('.scroll-right');

        scrollLeft.addEventListener('click', () => {
            scrollContainer.scrollBy({ left: -300, behavior: 'smooth' });
        });

        scrollRight.addEventListener('click', () => {
            scrollContainer.scrollBy({ left: 300, behavior: 'smooth' });
        });
    });
</script>

<!-- Four Static Boxes -->
<section class="container mt-5">
    <div class="row text-center">
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 1</div>
        </div>
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 2</div>
        </div>
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 3</div>
        </div>
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="min-height: 75px;">Static Box 4</div>
        </div>
    </div>
</section>

<!-- Discover Services Section -->
<section class="container mt-5 text-center">
    <div class="p-3 bg-secondary text-white">
        <h3>Discover Our Premium Services</h3>
        <p>Explore exclusive deals and unparalleled comfort for your travels.</p>
    </div>
</section>

<!-- Section: Top-Selling Trips -->
<section class="container mt-5">
    <h2 class="text-center mb-4">Top-Selling Trips</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
        {% for trip in top_selling_trips %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-center mb-3">{{ trip.tour_name }}</h5>
                    <p class="mb-1"><strong>Remaining Seats:</strong> {{ trip.remaining_seats }}</p>
                    <p class="mb-1"><strong>Price per Adult:</strong> {{ trip.price_per_adult }} CZK</p>
                    <p class="mb-3"><strong>Price per Child:</strong> {{ trip.price_per_child }} CZK</p>
                    <div class="mt-auto text-center">
                        <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Discover Services Section -->
<section class="container mt-5 text-center">
    <div class="p-3 bg-secondary text-white">
        <h3>Plan Your Last Minute Escape</h3>
        <p>Book your dream vacation today at incredible prices.</p>
    </div>
</section>

<!-- Section: Last Minute Trips -->
<section class="container mt-5">
    <h2>Last Minute Trips</h2>
    <div class="row">
        {% for trip in last_minute_trips %}
        <div class="col-md-4">
            <div class="card mb-3" style="height: 400px;">
                <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                <div class="card-body d-flex flex-column justify-content-between">
                    <h5 class="card-title">{{ trip.tour_name }}</h5>
                    <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                    <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                    <div class="text-center mt-auto">
                        <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Discover Services Section -->
<section class="container mt-5 text-center">
    <div class="p-3 bg-secondary text-white">
        <h3>Upcoming Adventures Await</h3>
        <p>Find trips with plenty of time to prepare and plan.</p>
    </div>
</section>

<!-- Section: Trips with Low Seats -->
<section class="container mt-5">
    <h2>Trips with Less Than 40 Seats</h2>
    <div class="row">
        {% for trip in trips_with_low_seats %}
        <div class="col-md-4">
            <div class="card mb-3" style="height: 400px;">
                <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                <div class="card-body d-flex flex-column justify-content-between">
                    <h5 class="card-title">{{ trip.tour_name }}</h5>
                    <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                    <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                    <div class="text-center mt-auto">
                        <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Section: Upcoming Trips -->
<section class="container mt-5">
    <h2>Upcoming Trips (Departing in More Than 5 Days)</h2>
    <div class="row">
        {% for trip in upcoming_trips %}
        <div class="col-md-4">
            <div class="card mb-3" style="height: 400px;">
                <img src="{{ trip.image.url }}" class="card-img-top" alt="{{ trip.tour_name }}">
                <div class="card-body d-flex flex-column justify-content-between">
                    <h5 class="card-title">{{ trip.tour_name }}</h5>
                    <p class="card-text">Remaining Seats: {{ trip.remaining_seats }}</p>
                    <p class="card-text">Price per Adult: {{ trip.price_per_adult }} CZK</p>
                    <div class="text-center mt-auto">
                        <a href="{% url 'trip_detail' trip.id %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Newsletter Section -->
<section class="container mt-5">
    <div class="row text-center">
        <div class="col-md-3">
            <div class="p-3 border bg-light" style="height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h4><a href="{% url 'contact' %}">Newsletter</a></h4>
                <form method="post" action="/newsletter/">
                    {% csrf_token %}
                    <label>
                        <input type="email" name="email" placeholder="Enter your email" class="form-control">
                    </label>
                    <button type="submit" class="btn btn-primary mt-2">Subscribe</button>
                </form>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 border bg-light" style="height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h4><a href="{% url 'contact' %}">Contact Us</a></h4>
                <p>Email: info@travelagency.com</p>
                <p>Phone: +420 123 456 789</p>
                <p>Address: 123 Travel Street, Prague</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 border bg-light" style="height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h4>Follow Us</h4>
                <p>
                    <a href="#" class="me-3">Facebook</a>
                    <a href="#" class="me-3">Twitter</a>
                    <a href="#">Instagram</a>
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Footer Section -->
<footer class="container mt-5">
    <div class="row text-center">
        <div class="col-md-4">
            <div class="p-3 border bg-light">
                <h5>Visit Us</h5>
                <p>123 Travel Street<br>Prague, Czech Republic</p>
            </div>
        </div>
    </div>
</footer>

{% endblock %}
